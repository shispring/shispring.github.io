<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shispring.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"./public/search.xml"};
  </script>

  <meta name="description" content="tcpdump ç½‘ç»œé—®é¢˜æ’æŸ¥å®Œæ•´æŒ‡å— https:&#x2F;&#x2F;help.aliyun.com&#x2F;zh&#x2F;ecs&#x2F;user-guide&#x2F;how-to-grab-data-packets-when-the-network-is-abnormal?spm&#x3D;a2c4g.11186623.help-menu-25365.d_0_10_10_3.2a2e576edT9KGV  ğŸ¯ ç›®å½• æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ å¸¸è§ç½‘ç»œé—®é¢˜åœº">
<meta property="og:type" content="article">
<meta property="og:title" content="tcpdumpæŠ“åŒ…æŒ‡å—">
<meta property="og:url" content="https://shispring.github.io/2025/07/31/tcpdump%E6%8A%93%E5%8C%85%E6%8C%87%E5%8D%97/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="tcpdump ç½‘ç»œé—®é¢˜æ’æŸ¥å®Œæ•´æŒ‡å— https:&#x2F;&#x2F;help.aliyun.com&#x2F;zh&#x2F;ecs&#x2F;user-guide&#x2F;how-to-grab-data-packets-when-the-network-is-abnormal?spm&#x3D;a2c4g.11186623.help-menu-25365.d_0_10_10_3.2a2e576edT9KGV  ğŸ¯ ç›®å½• æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ å¸¸è§ç½‘ç»œé—®é¢˜åœº">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-31T05:15:53.000Z">
<meta property="article:modified_time" content="2025-11-21T02:41:31.229Z">
<meta property="article:author" content="shispring">
<meta property="article:tag" content="network">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://shispring.github.io/2025/07/31/tcpdump%E6%8A%93%E5%8C%85%E6%8C%87%E5%8D%97/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>tcpdumpæŠ“åŒ…æŒ‡å— | Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-resources">

    <a href="/resources" rel="section"><i class="fa fa-download fa-fw"></i>èµ„æº</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shispring.github.io/2025/07/31/tcpdump%E6%8A%93%E5%8C%85%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="shispring">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          tcpdumpæŠ“åŒ…æŒ‡å—
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-31 13:15:53" itemprop="dateCreated datePublished" datetime="2025-07-31T13:15:53+08:00">2025-07-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-11-21 10:41:31" itemprop="dateModified" datetime="2025-11-21T10:41:31+08:00">2025-11-21</time>
              </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="tcpdump-ç½‘ç»œé—®é¢˜æ’æŸ¥å®Œæ•´æŒ‡å—"><a href="#tcpdump-ç½‘ç»œé—®é¢˜æ’æŸ¥å®Œæ•´æŒ‡å—" class="headerlink" title="tcpdump ç½‘ç»œé—®é¢˜æ’æŸ¥å®Œæ•´æŒ‡å—"></a>tcpdump ç½‘ç»œé—®é¢˜æ’æŸ¥å®Œæ•´æŒ‡å—</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ecs/user-guide/how-to-grab-data-packets-when-the-network-is-abnormal?spm=a2c4g.11186623.help-menu-25365.d_0_10_10_3.2a2e576edT9KGV">https://help.aliyun.com/zh/ecs/user-guide/how-to-grab-data-packets-when-the-network-is-abnormal?spm=a2c4g.11186623.help-menu-25365.d_0_10_10_3.2a2e576edT9KGV</a></p>
</blockquote>
<h2 id="ğŸ¯-ç›®å½•"><a href="#ğŸ¯-ç›®å½•" class="headerlink" title="ğŸ¯ ç›®å½•"></a>ğŸ¯ ç›®å½•</h2><ul>
<li><a href="#%E6%8A%93%E5%8C%85%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C">æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98%E5%9C%BA%E6%99%AF">å¸¸è§ç½‘ç»œé—®é¢˜åœºæ™¯</a></li>
<li><a href="#tcpdump-%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3">tcpdump å‘½ä»¤å‚æ•°è¯¦è§£</a></li>
<li><a href="#%E5%AE%9E%E6%88%98%E5%9C%BA%E6%99%AF%E4%B8%8E%E5%91%BD%E4%BB%A4">å®æˆ˜åœºæ™¯ä¸å‘½ä»¤</a></li>
<li><a href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95">ç»“æœåˆ†ææ–¹æ³•</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</a></li>
</ul>
<hr>
<h2 id="æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ"><a href="#æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ"></a>æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ</h2><h3 id="1-é—®é¢˜å®šä¹‰é˜¶æ®µ"><a href="#1-é—®é¢˜å®šä¹‰é˜¶æ®µ" class="headerlink" title="1. é—®é¢˜å®šä¹‰é˜¶æ®µ"></a>1. é—®é¢˜å®šä¹‰é˜¶æ®µ</h3><p><strong>åœ¨å¼€å§‹æŠ“åŒ…å‰ï¼Œå¿…é¡»æ˜ç¡®ä»¥ä¸‹é—®é¢˜ï¼š</strong></p>
<ul>
<li>ğŸ” <strong>å…·ä½“ç°è±¡</strong>ï¼šè¿æ¥è¶…æ—¶ï¼Ÿå“åº”æ…¢ï¼Ÿæ•°æ®åŒ…ä¸¢å¤±ï¼Ÿ</li>
<li>ğŸ“ <strong>é—®é¢˜èŒƒå›´</strong>ï¼šå®¢æˆ·ç«¯ï¼ŸæœåŠ¡ç«¯ï¼Ÿä¸­é—´ç½‘ç»œè®¾å¤‡ï¼Ÿ</li>
<li>â° <strong>å‘ç”Ÿæ—¶é—´</strong>ï¼šæŒç»­å‘ç”Ÿï¼Ÿé—´æ­‡æ€§ï¼Ÿç‰¹å®šæ—¶é—´æ®µï¼Ÿ</li>
<li>ğŸŒ <strong>ç½‘ç»œæ‹“æ‰‘</strong>ï¼šäº†è§£æ•°æ®åŒ…çš„å®Œæ•´ä¼ è¾“è·¯å¾„</li>
<li>ğŸ“Š <strong>åŸºçº¿æ•°æ®</strong>ï¼šæ­£å¸¸æƒ…å†µä¸‹çš„ç½‘ç»œè¡¨ç°å¦‚ä½•ï¼Ÿ</li>
</ul>
<h3 id="2-ç¯å¢ƒä¿¡æ¯æ”¶é›†"><a href="#2-ç¯å¢ƒä¿¡æ¯æ”¶é›†" class="headerlink" title="2. ç¯å¢ƒä¿¡æ¯æ”¶é›†"></a>2. ç¯å¢ƒä¿¡æ¯æ”¶é›†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ç½‘ç»œæ¥å£</span></span><br><span class="line">ip addr show</span><br><span class="line">ifconfig -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥è·¯ç”±è¡¨</span></span><br><span class="line">ip route show</span><br><span class="line">route -n</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€</span></span><br><span class="line">ss -tuln</span><br><span class="line">netstat -tuln</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç³»ç»Ÿèµ„æº</span></span><br><span class="line">free -h</span><br><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure>

<h3 id="3-æƒé™å’Œå·¥å…·å‡†å¤‡"><a href="#3-æƒé™å’Œå·¥å…·å‡†å¤‡" class="headerlink" title="3. æƒé™å’Œå·¥å…·å‡†å¤‡"></a>3. æƒé™å’Œå·¥å…·å‡†å¤‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¡®ä¿æœ‰è¶³å¤Ÿæƒé™</span></span><br><span class="line"><span class="built_in">sudo</span> -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ tcpdump ç‰ˆæœ¬</span></span><br><span class="line">tcpdump --version</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼ˆæŠ“åŒ…æ–‡ä»¶å¯èƒ½å¾ˆå¤§ï¼‰</span></span><br><span class="line"><span class="built_in">df</span> -h /tmp</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å¸¸è§ç½‘ç»œé—®é¢˜åœºæ™¯"><a href="#å¸¸è§ç½‘ç»œé—®é¢˜åœºæ™¯" class="headerlink" title="å¸¸è§ç½‘ç»œé—®é¢˜åœºæ™¯"></a>å¸¸è§ç½‘ç»œé—®é¢˜åœºæ™¯</h2><h3 id="ğŸš¨-åœºæ™¯åˆ†ç±»è¡¨"><a href="#ğŸš¨-åœºæ™¯åˆ†ç±»è¡¨" class="headerlink" title="ğŸš¨ åœºæ™¯åˆ†ç±»è¡¨"></a>ğŸš¨ åœºæ™¯åˆ†ç±»è¡¨</h3><table>
<thead>
<tr>
<th>åœºæ™¯ç±»å‹</th>
<th>å…¸å‹é—®é¢˜</th>
<th>å…³æ³¨é‡ç‚¹</th>
<th>é¢„æœŸç»“æœ</th>
</tr>
</thead>
<tbody><tr>
<td><strong>è¿æ¥å»ºç«‹é—®é¢˜</strong></td>
<td>è¿æ¥è¶…æ—¶ã€æ‹’ç»è¿æ¥</td>
<td>TCP ä¸‰æ¬¡æ¡æ‰‹</td>
<td>SYN, SYN-ACK, ACK</td>
</tr>
<tr>
<td><strong>æ€§èƒ½é—®é¢˜</strong></td>
<td>å“åº”æ…¢ã€ååé‡ä½</td>
<td>å»¶è¿Ÿã€é‡ä¼ ã€çª—å£å¤§å°</td>
<td>RTT, é‡ä¼ ç‡</td>
</tr>
<tr>
<td><strong>DNS è§£æé—®é¢˜</strong></td>
<td>åŸŸåæ— æ³•è§£æ</td>
<td>DNS æŸ¥è¯¢å’Œå“åº”</td>
<td>Query&#x2F;Response åŒ¹é…</td>
</tr>
<tr>
<td><strong>HTTP&#x2F;HTTPS é—®é¢˜</strong></td>
<td>4xx&#x2F;5xx é”™è¯¯ã€SSL æ¡æ‰‹å¤±è´¥</td>
<td>åº”ç”¨å±‚åè®®</td>
<td>HTTP çŠ¶æ€ç ã€TLS æ¡æ‰‹</td>
</tr>
<tr>
<td><strong>é˜²ç«å¢™&#x2F;å®‰å…¨é—®é¢˜</strong></td>
<td>åŒ…è¢«ä¸¢å¼ƒã€ç«¯å£ä¸é€š</td>
<td>ICMP æ¶ˆæ¯ã€RST åŒ…</td>
<td>æ‹’ç»åŸå› åˆ†æ</td>
</tr>
<tr>
<td><strong>è´Ÿè½½å‡è¡¡é—®é¢˜</strong></td>
<td>è¯·æ±‚åˆ†å¸ƒä¸å‡ã€å¥åº·æ£€æŸ¥å¤±è´¥</td>
<td>å¤šç›®æ ‡æµé‡åˆ†æ</td>
<td>è´Ÿè½½åˆ†å¸ƒæ¨¡å¼</td>
</tr>
</tbody></table>
<hr>
<h2 id="tcpdump-å‘½ä»¤å‚æ•°è¯¦è§£"><a href="#tcpdump-å‘½ä»¤å‚æ•°è¯¦è§£" class="headerlink" title="tcpdump å‘½ä»¤å‚æ•°è¯¦è§£"></a>tcpdump å‘½ä»¤å‚æ•°è¯¦è§£</h2><h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump [é€‰é¡¹] [è¿‡æ»¤è¡¨è¾¾å¼]</span><br></pre></td></tr></table></figure>

<h3 id="æ ¸å¿ƒå‚æ•°"><a href="#æ ¸å¿ƒå‚æ•°" class="headerlink" title="æ ¸å¿ƒå‚æ•°"></a>æ ¸å¿ƒå‚æ•°</h3><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>-i</code></td>
<td>æŒ‡å®šç½‘ç»œæ¥å£</td>
<td><code>-i eth0</code>, <code>-i any</code></td>
</tr>
<tr>
<td><code>-w</code></td>
<td>å†™å…¥æ–‡ä»¶</td>
<td><code>-w capture.pcap</code></td>
</tr>
<tr>
<td><code>-r</code></td>
<td>è¯»å–æ–‡ä»¶</td>
<td><code>-r capture.pcap</code></td>
</tr>
<tr>
<td><code>-c</code></td>
<td>æ•è·åŒ…æ•°é‡</td>
<td><code>-c 1000</code></td>
</tr>
<tr>
<td><code>-n</code></td>
<td>ä¸è§£æä¸»æœºå</td>
<td><code>-n</code></td>
</tr>
<tr>
<td><code>-nn</code></td>
<td>ä¸è§£æä¸»æœºåå’Œç«¯å£å</td>
<td><code>-nn</code></td>
</tr>
<tr>
<td><code>-v/-vv/-vvv</code></td>
<td>è¯¦ç»†ç¨‹åº¦</td>
<td><code>-vv</code></td>
</tr>
<tr>
<td><code>-s</code></td>
<td>æ¯ä¸ªåŒ…çš„æ•è·é•¿åº¦</td>
<td><code>-s 65535</code> (å®Œæ•´åŒ…)</td>
</tr>
<tr>
<td><code>-X</code></td>
<td>åå…­è¿›åˆ¶å’ŒASCIIæ˜¾ç¤º</td>
<td><code>-X</code></td>
</tr>
<tr>
<td><code>-A</code></td>
<td>ASCII æ˜¾ç¤º</td>
<td><code>-A</code></td>
</tr>
<tr>
<td><code>-t</code></td>
<td>ä¸æ˜¾ç¤ºæ—¶é—´æˆ³</td>
<td><code>-t</code></td>
</tr>
<tr>
<td><code>-tt</code></td>
<td>æ˜¾ç¤ºç²¾ç¡®æ—¶é—´æˆ³</td>
<td><code>-tt</code></td>
</tr>
</tbody></table>
<h3 id="è¿‡æ»¤è¡¨è¾¾å¼"><a href="#è¿‡æ»¤è¡¨è¾¾å¼" class="headerlink" title="è¿‡æ»¤è¡¨è¾¾å¼"></a>è¿‡æ»¤è¡¨è¾¾å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸»æœºè¿‡æ»¤</span></span><br><span class="line">host 192.168.1.100</span><br><span class="line">src host 192.168.1.100</span><br><span class="line">dst host 192.168.1.100</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«¯å£è¿‡æ»¤</span></span><br><span class="line">port 80</span><br><span class="line">src port 8080</span><br><span class="line">dst port 443</span><br><span class="line">portrange 8000-8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># åè®®è¿‡æ»¤</span></span><br><span class="line">tcp</span><br><span class="line">udp</span><br><span class="line">icmp</span><br><span class="line">arp</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç½‘ç»œè¿‡æ»¤</span></span><br><span class="line">net 192.168.1.0/24</span><br><span class="line">src net 10.0.0.0/8</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€»è¾‘æ“ä½œç¬¦</span></span><br><span class="line">and, or, not</span><br><span class="line"><span class="comment"># ç¤ºä¾‹ï¼štcp and port 80 and host 192.168.1.100</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å®æˆ˜åœºæ™¯ä¸å‘½ä»¤"><a href="#å®æˆ˜åœºæ™¯ä¸å‘½ä»¤" class="headerlink" title="å®æˆ˜åœºæ™¯ä¸å‘½ä»¤"></a>å®æˆ˜åœºæ™¯ä¸å‘½ä»¤</h2><h3 id="åœºæ™¯1ï¼šTCP-è¿æ¥é—®é¢˜æ’æŸ¥"><a href="#åœºæ™¯1ï¼šTCP-è¿æ¥é—®é¢˜æ’æŸ¥" class="headerlink" title="åœºæ™¯1ï¼šTCP è¿æ¥é—®é¢˜æ’æŸ¥"></a>åœºæ™¯1ï¼šTCP è¿æ¥é—®é¢˜æ’æŸ¥</h3><h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>åº”ç”¨è¿æ¥æ•°æ®åº“è¶…æ—¶ï¼Œéœ€è¦ç¡®è®¤æ˜¯ç½‘ç»œé—®é¢˜è¿˜æ˜¯åº”ç”¨é—®é¢˜ã€‚</p>
<h4 id="å®šä½æ€è·¯"><a href="#å®šä½æ€è·¯" class="headerlink" title="å®šä½æ€è·¯"></a>å®šä½æ€è·¯</h4><ol>
<li>ç¡®è®¤ TCP ä¸‰æ¬¡æ¡æ‰‹æ˜¯å¦æ­£å¸¸</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰ RST åŒ…</li>
<li>åˆ†æè¿æ¥å»ºç«‹æ—¶é—´</li>
</ol>
<h4 id="æŠ“åŒ…å‘½ä»¤"><a href="#æŠ“åŒ…å‘½ä»¤" class="headerlink" title="æŠ“åŒ…å‘½ä»¤"></a>æŠ“åŒ…å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠ“å–ç‰¹å®šä¸»æœºå’Œç«¯å£çš„ TCP è¿æ¥</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv -s 65535 \</span><br><span class="line">  -w tcp_connection_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap \</span><br><span class="line">  <span class="string">&quot;host 192.168.1.100 and port 3306 and tcp&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®æ—¶æŸ¥çœ‹ TCP æ¡æ‰‹è¿‡ç¨‹</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv <span class="string">&quot;tcp[tcpflags] &amp; (tcp-syn|tcp-ack) != 0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åªçœ‹ SYN åŒ…</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn <span class="string">&quot;tcp[tcpflags] &amp; tcp-syn != 0&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­£å¸¸çš„ TCP æ¡æ‰‹åº”è¯¥çœ‹åˆ°ï¼š</span></span><br><span class="line"><span class="comment"># 1. Client -&gt; Server: SYN</span></span><br><span class="line"><span class="comment"># 2. Server -&gt; Client: SYN, ACK  </span></span><br><span class="line"><span class="comment"># 3. Client -&gt; Server: ACK</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼‚å¸¸æƒ…å†µï¼š</span></span><br><span class="line"><span class="comment"># - åªæœ‰ SYNï¼Œæ²¡æœ‰ SYN-ACKï¼šæœåŠ¡ç«¯æœªå“åº”</span></span><br><span class="line"><span class="comment"># - SYN-ACK åæœ‰ RSTï¼šè¿æ¥è¢«é‡ç½®</span></span><br><span class="line"><span class="comment"># - é‡å¤çš„ SYNï¼šç½‘ç»œå»¶è¿Ÿæˆ–ä¸¢åŒ…</span></span><br></pre></td></tr></table></figure>

<h3 id="åœºæ™¯2ï¼šHTTP-HTTPS-é—®é¢˜æ’æŸ¥"><a href="#åœºæ™¯2ï¼šHTTP-HTTPS-é—®é¢˜æ’æŸ¥" class="headerlink" title="åœºæ™¯2ï¼šHTTP&#x2F;HTTPS é—®é¢˜æ’æŸ¥"></a>åœºæ™¯2ï¼šHTTP&#x2F;HTTPS é—®é¢˜æ’æŸ¥</h3><h4 id="é—®é¢˜æè¿°-1"><a href="#é—®é¢˜æè¿°-1" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>Web åº”ç”¨å“åº”æ…¢ï¼Œç”¨æˆ·åé¦ˆé¡µé¢åŠ è½½æ—¶é—´é•¿ã€‚</p>
<h4 id="å®šä½æ€è·¯-1"><a href="#å®šä½æ€è·¯-1" class="headerlink" title="å®šä½æ€è·¯"></a>å®šä½æ€è·¯</h4><ol>
<li>åˆ†æ HTTP è¯·æ±‚å’Œå“åº”æ—¶é—´</li>
<li>æ£€æŸ¥ HTTP çŠ¶æ€ç </li>
<li>åˆ†æ SSL&#x2F;TLS æ¡æ‰‹æ—¶é—´</li>
</ol>
<h4 id="æŠ“åŒ…å‘½ä»¤-1"><a href="#æŠ“åŒ…å‘½ä»¤-1" class="headerlink" title="æŠ“åŒ…å‘½ä»¤"></a>æŠ“åŒ…å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠ“å– HTTP æµé‡</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -A -s 65535 \</span><br><span class="line">  -w http_debug_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap \</span><br><span class="line">  <span class="string">&quot;port 80 or port 8080&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ“å– HTTPS æµé‡ï¼ˆåŒ…å« TLS æ¡æ‰‹ï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv -s 65535 \</span><br><span class="line">  -w https_debug_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap \</span><br><span class="line">  <span class="string">&quot;port 443&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®æ—¶æŸ¥çœ‹ HTTP è¯·æ±‚</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -A <span class="string">&quot;port 80 and tcp and host 192.168.1.100&quot;</span> \</span><br><span class="line">  | grep -E <span class="string">&quot;(GET|POST|PUT|DELETE|HTTP)&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç»“æœåˆ†æ-1"><a href="#ç»“æœåˆ†æ-1" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># HTTP è¯·æ±‚åˆ†æè¦ç‚¹ï¼š</span></span><br><span class="line"><span class="comment"># 1. è¯·æ±‚æ–¹æ³•å’Œ URL</span></span><br><span class="line"><span class="comment"># 2. User-Agent å’Œå…¶ä»–å¤´ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># 3. å“åº”çŠ¶æ€ç ï¼ˆ200, 404, 500 ç­‰ï¼‰</span></span><br><span class="line"><span class="comment"># 4. Content-Length å’Œä¼ è¾“æ—¶é—´</span></span><br><span class="line"><span class="comment"># 5. Keep-Alive è¿æ¥å¤ç”¨æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTPS åˆ†æè¦ç‚¹ï¼š</span></span><br><span class="line"><span class="comment"># 1. TLS æ¡æ‰‹æ—¶é—´</span></span><br><span class="line"><span class="comment"># 2. è¯ä¹¦äº¤æ¢è¿‡ç¨‹</span></span><br><span class="line"><span class="comment"># 3. åŠ å¯†åçš„æ•°æ®ä¼ è¾“é‡</span></span><br></pre></td></tr></table></figure>

<h3 id="åœºæ™¯3ï¼šDNS-è§£æé—®é¢˜"><a href="#åœºæ™¯3ï¼šDNS-è§£æé—®é¢˜" class="headerlink" title="åœºæ™¯3ï¼šDNS è§£æé—®é¢˜"></a>åœºæ™¯3ï¼šDNS è§£æé—®é¢˜</h3><h4 id="é—®é¢˜æè¿°-2"><a href="#é—®é¢˜æè¿°-2" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>åŸŸåè§£æå¤±è´¥æˆ–è§£ææ…¢ï¼Œå½±å“åº”ç”¨å¯åŠ¨ã€‚</p>
<h4 id="å®šä½æ€è·¯-2"><a href="#å®šä½æ€è·¯-2" class="headerlink" title="å®šä½æ€è·¯"></a>å®šä½æ€è·¯</h4><ol>
<li>æ•è· DNS æŸ¥è¯¢å’Œå“åº”</li>
<li>åˆ†æè§£ææ—¶é—´</li>
<li>æ£€æŸ¥ DNS æœåŠ¡å™¨å“åº”</li>
</ol>
<h4 id="æŠ“åŒ…å‘½ä»¤-2"><a href="#æŠ“åŒ…å‘½ä»¤-2" class="headerlink" title="æŠ“åŒ…å‘½ä»¤"></a>æŠ“åŒ…å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠ“å– DNS æŸ¥è¯¢</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv -s 65535 \</span><br><span class="line">  -w dns_debug_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap \</span><br><span class="line">  <span class="string">&quot;port 53&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®æ—¶æŸ¥çœ‹ DNS æŸ¥è¯¢</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn <span class="string">&quot;port 53&quot;</span> | \</span><br><span class="line">  <span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;[<span class="subst">$(date &#x27;+%H:%M:%S&#x27;)</span>] <span class="variable">$line</span>&quot;</span></span><br><span class="line">  <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ“å–ç‰¹å®šåŸŸåçš„ DNS æŸ¥è¯¢</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv <span class="string">&quot;port 53 and host 8.8.8.8&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç»“æœåˆ†æ-2"><a href="#ç»“æœåˆ†æ-2" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># DNS åˆ†æè¦ç‚¹ï¼š</span></span><br><span class="line"><span class="comment"># 1. æŸ¥è¯¢ç±»å‹ï¼ˆA, AAAA, CNAME, MX ç­‰ï¼‰</span></span><br><span class="line"><span class="comment"># 2. æŸ¥è¯¢åŸŸåå’Œå“åº” IP</span></span><br><span class="line"><span class="comment"># 3. å“åº”æ—¶é—´ï¼ˆQuery -&gt; Response é—´éš”ï¼‰</span></span><br><span class="line"><span class="comment"># 4. DNS æœåŠ¡å™¨æ˜¯å¦å“åº”</span></span><br><span class="line"><span class="comment"># 5. NXDOMAIN é”™è¯¯ï¼ˆåŸŸåä¸å­˜åœ¨ï¼‰</span></span><br></pre></td></tr></table></figure>

<h3 id="åœºæ™¯4ï¼šç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…åˆ†æ"><a href="#åœºæ™¯4ï¼šç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…åˆ†æ" class="headerlink" title="åœºæ™¯4ï¼šç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…åˆ†æ"></a>åœºæ™¯4ï¼šç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…åˆ†æ</h3><h4 id="é—®é¢˜æè¿°-3"><a href="#é—®é¢˜æè¿°-3" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>ç½‘ç»œä¼ è¾“æ…¢ï¼Œæ€€ç–‘æœ‰ä¸¢åŒ…æˆ–é«˜å»¶è¿Ÿã€‚</p>
<h4 id="å®šä½æ€è·¯-3"><a href="#å®šä½æ€è·¯-3" class="headerlink" title="å®šä½æ€è·¯"></a>å®šä½æ€è·¯</h4><ol>
<li>åˆ†æ RTTï¼ˆå¾€è¿”æ—¶é—´ï¼‰</li>
<li>æ£€æµ‹é‡ä¼ åŒ…</li>
<li>åˆ†æ TCP çª—å£å¤§å°</li>
</ol>
<h4 id="æŠ“åŒ…å‘½ä»¤-3"><a href="#æŠ“åŒ…å‘½ä»¤-3" class="headerlink" title="æŠ“åŒ…å‘½ä»¤"></a>æŠ“åŒ…å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠ“å– ICMP ping åŒ…åˆ†æå»¶è¿Ÿ</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv \</span><br><span class="line">  -w ping_analysis_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap \</span><br><span class="line">  <span class="string">&quot;icmp and host 192.168.1.100&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ“å– TCP é‡ä¼ åŒ…</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv \</span><br><span class="line">  <span class="string">&quot;tcp and host 192.168.1.100&quot;</span> | \</span><br><span class="line">  grep -E <span class="string">&quot;(retransmission|duplicate)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ“å–æ‰€æœ‰æµé‡åˆ†æçª—å£å¤§å°</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv -s 96 \</span><br><span class="line">  -w network_performance_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap \</span><br><span class="line">  <span class="string">&quot;tcp and host 192.168.1.100&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç»“æœåˆ†æ-3"><a href="#ç»“æœåˆ†æ-3" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»¶è¿Ÿåˆ†æï¼š</span></span><br><span class="line"><span class="comment"># 1. ICMP ping çš„å¾€è¿”æ—¶é—´</span></span><br><span class="line"><span class="comment"># 2. TCP SYN -&gt; SYN-ACK çš„æ—¶é—´é—´éš”</span></span><br><span class="line"><span class="comment"># 3. HTTP è¯·æ±‚ -&gt; å“åº”çš„æ—¶é—´é—´éš”</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸¢åŒ…åˆ†æï¼š</span></span><br><span class="line"><span class="comment"># 1. é‡å¤çš„ ACK åŒ…</span></span><br><span class="line"><span class="comment"># 2. TCP é‡ä¼ </span></span><br><span class="line"><span class="comment"># 3. çª—å£å¤§å°å˜åŒ–</span></span><br></pre></td></tr></table></figure>

<h3 id="åœºæ™¯5ï¼šå®¹å™¨ç½‘ç»œé—®é¢˜"><a href="#åœºæ™¯5ï¼šå®¹å™¨ç½‘ç»œé—®é¢˜" class="headerlink" title="åœºæ™¯5ï¼šå®¹å™¨ç½‘ç»œé—®é¢˜"></a>åœºæ™¯5ï¼šå®¹å™¨ç½‘ç»œé—®é¢˜</h3><h4 id="é—®é¢˜æè¿°-4"><a href="#é—®é¢˜æè¿°-4" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>Kubernetes é›†ç¾¤ä¸­ Pod é—´é€šä¿¡å¼‚å¸¸ã€‚</p>
<h4 id="å®šä½æ€è·¯-4"><a href="#å®šä½æ€è·¯-4" class="headerlink" title="å®šä½æ€è·¯"></a>å®šä½æ€è·¯</h4><ol>
<li>åœ¨ä¸åŒç½‘ç»œå±‚é¢æŠ“åŒ…</li>
<li>åˆ†æå®¹å™¨ç½‘ç»œæ¥å£</li>
<li>æ£€æŸ¥ iptables è§„åˆ™å½±å“</li>
</ol>
<h4 id="æŠ“åŒ…å‘½ä»¤-4"><a href="#æŠ“åŒ…å‘½ä»¤-4" class="headerlink" title="æŠ“åŒ…å‘½ä»¤"></a>æŠ“åŒ…å‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å®¿ä¸»æœºæŠ“å–æ‰€æœ‰å®¹å™¨æµé‡</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i docker0 -nn -vv \</span><br><span class="line">  -w container_network_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ“å–ç‰¹å®š Pod IP çš„æµé‡</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv \</span><br><span class="line">  <span class="string">&quot;host 10.244.1.100&quot;</span> \</span><br><span class="line">  -w pod_communication_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å®¹å™¨å†…æŠ“åŒ…</span></span><br><span class="line">kubectl <span class="built_in">exec</span> -it pod-name -c container-name -- \</span><br><span class="line">  tcpdump -i eth0 -nn -vv -w - &gt; container_internal.pcap</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ“å– CNI ç½‘ç»œæ¥å£æµé‡</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i cni0 -nn -vv \</span><br><span class="line">  -w cni_traffic_$(<span class="built_in">date</span> +%Y%m%d_%H%M%S).pcap</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ç»“æœåˆ†ææ–¹æ³•"><a href="#ç»“æœåˆ†ææ–¹æ³•" class="headerlink" title="ç»“æœåˆ†ææ–¹æ³•"></a>ç»“æœåˆ†ææ–¹æ³•</h2><h3 id="1-ä½¿ç”¨-Wireshark-å›¾å½¢åŒ–åˆ†æ"><a href="#1-ä½¿ç”¨-Wireshark-å›¾å½¢åŒ–åˆ†æ" class="headerlink" title="1. ä½¿ç”¨ Wireshark å›¾å½¢åŒ–åˆ†æ"></a>1. ä½¿ç”¨ Wireshark å›¾å½¢åŒ–åˆ†æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°† pcap æ–‡ä»¶å¯¼å…¥ Wireshark</span></span><br><span class="line">wireshark capture.pcap</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸¸ç”¨ Wireshark è¿‡æ»¤å™¨</span></span><br><span class="line">tcp.analysis.flags</span><br><span class="line">http.response.code != 200</span><br><span class="line">dns.flags.response == 0</span><br><span class="line">tcp.analysis.retransmission</span><br></pre></td></tr></table></figure>

<h3 id="2-å‘½ä»¤è¡Œå¿«é€Ÿåˆ†æ"><a href="#2-å‘½ä»¤è¡Œå¿«é€Ÿåˆ†æ" class="headerlink" title="2. å‘½ä»¤è¡Œå¿«é€Ÿåˆ†æ"></a>2. å‘½ä»¤è¡Œå¿«é€Ÿåˆ†æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»Ÿè®¡åè®®åˆ†å¸ƒ</span></span><br><span class="line">tcpdump -r capture.pcap -nn | awk <span class="string">&#x27;&#123;print $3&#125;&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»Ÿè®¡ç›®æ ‡ IP</span></span><br><span class="line">tcpdump -r capture.pcap -nn | awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span> | <span class="built_in">cut</span> -d: -f1 | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾ç‰¹å®šé”™è¯¯</span></span><br><span class="line">tcpdump -r capture.pcap -nn -A | grep -i <span class="string">&quot;error\|timeout\|refused&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†æè¿æ¥æ—¶é—´</span></span><br><span class="line">tcpdump -r capture.pcap -nn -tt | grep -E <span class="string">&quot;SYN|ACK&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-æ•°æ®åŒ…åˆ†ææ¸…å•"><a href="#3-æ•°æ®åŒ…åˆ†ææ¸…å•" class="headerlink" title="3. æ•°æ®åŒ…åˆ†ææ¸…å•"></a>3. æ•°æ®åŒ…åˆ†ææ¸…å•</h3><h4 id="TCP-è¿æ¥åˆ†æ"><a href="#TCP-è¿æ¥åˆ†æ" class="headerlink" title="TCP è¿æ¥åˆ†æ"></a>TCP è¿æ¥åˆ†æ</h4><ul>
<li><input disabled="" type="checkbox"> SYN, SYN-ACK, ACK ä¸‰æ¬¡æ¡æ‰‹å®Œæ•´</li>
<li><input disabled="" type="checkbox"> åºåˆ—å·å’Œç¡®è®¤å·æ­£ç¡®é€’å¢</li>
<li><input disabled="" type="checkbox"> æ— å¼‚å¸¸ RST åŒ…</li>
<li><input disabled="" type="checkbox"> çª—å£å¤§å°åˆç†</li>
<li><input disabled="" type="checkbox"> æ— é¢‘ç¹é‡ä¼ </li>
</ul>
<h4 id="HTTP-åˆ†æ"><a href="#HTTP-åˆ†æ" class="headerlink" title="HTTP åˆ†æ"></a>HTTP åˆ†æ</h4><ul>
<li><input disabled="" type="checkbox"> è¯·æ±‚æ–¹æ³•å’Œ URL æ­£ç¡®</li>
<li><input disabled="" type="checkbox"> HTTP çŠ¶æ€ç ç¬¦åˆé¢„æœŸ</li>
<li><input disabled="" type="checkbox"> å“åº”æ—¶é—´åœ¨åˆç†èŒƒå›´</li>
<li><input disabled="" type="checkbox"> Content-Length ä¸å®é™…å†…å®¹åŒ¹é…</li>
<li><input disabled="" type="checkbox"> æ— å¼‚å¸¸é‡å®šå‘</li>
</ul>
<h4 id="DNS-åˆ†æ"><a href="#DNS-åˆ†æ" class="headerlink" title="DNS åˆ†æ"></a>DNS åˆ†æ</h4><ul>
<li><input disabled="" type="checkbox"> æŸ¥è¯¢å’Œå“åº”é…å¯¹æ­£ç¡®</li>
<li><input disabled="" type="checkbox"> å“åº”æ—¶é—´ &lt; 100ms</li>
<li><input disabled="" type="checkbox"> æ—  NXDOMAIN é”™è¯¯</li>
<li><input disabled="" type="checkbox"> DNS æœåŠ¡å™¨å¯è¾¾</li>
</ul>
<hr>
<h2 id="æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹"><a href="#æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹"></a>æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2><h3 id="âœ…-æœ€ä½³å®è·µ"><a href="#âœ…-æœ€ä½³å®è·µ" class="headerlink" title="âœ… æœ€ä½³å®è·µ"></a>âœ… æœ€ä½³å®è·µ</h3><h4 id="1-æŠ“åŒ…ç­–ç•¥"><a href="#1-æŠ“åŒ…ç­–ç•¥" class="headerlink" title="1. æŠ“åŒ…ç­–ç•¥"></a>1. æŠ“åŒ…ç­–ç•¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å§‹ç»ˆä½¿ç”¨æ—¶é—´æˆ³å’Œè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -vv -tt -s 65535</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤§æµé‡ç¯å¢ƒä¸‹é™åˆ¶æŠ“åŒ…å¤§å°</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -c 10000 -s 128</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨è½®è½¬æ–‡ä»¶é¿å…å•æ–‡ä»¶è¿‡å¤§</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -w capture.pcap -C 100 -W 5</span><br></pre></td></tr></table></figure>

<h4 id="2-è¿‡æ»¤å™¨ä¼˜åŒ–"><a href="#2-è¿‡æ»¤å™¨ä¼˜åŒ–" class="headerlink" title="2. è¿‡æ»¤å™¨ä¼˜åŒ–"></a>2. è¿‡æ»¤å™¨ä¼˜åŒ–</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç²¾ç¡®è¿‡æ»¤å‡å°‘æ— å…³æµé‡</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn \</span><br><span class="line">  <span class="string">&quot;host 192.168.1.100 and port 80 and tcp[tcpflags] &amp; tcp-syn != 0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ BPF è¿‡æ»¤å™¨æé«˜æ€§èƒ½</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn <span class="string">&quot;tcp and dst port 443&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-æ–‡ä»¶ç®¡ç†"><a href="#3-æ–‡ä»¶ç®¡ç†" class="headerlink" title="3. æ–‡ä»¶ç®¡ç†"></a>3. æ–‡ä»¶ç®¡ç†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸“é—¨çš„æŠ“åŒ…ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /tmp/tcpdump/$(<span class="built_in">date</span> +%Y%m%d)</span><br><span class="line"><span class="built_in">cd</span> /tmp/tcpdump/$(<span class="built_in">date</span> +%Y%m%d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨æè¿°æ€§æ–‡ä»¶å</span></span><br><span class="line"><span class="built_in">sudo</span> tcpdump -i any -nn -w <span class="string">&quot;<span class="subst">$(hostname)</span>_<span class="subst">$(date +%Y%m%d_%H%M%S)</span>_issue_description.pcap&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="âš ï¸-æ³¨æ„äº‹é¡¹"><a href="#âš ï¸-æ³¨æ„äº‹é¡¹" class="headerlink" title="âš ï¸ æ³¨æ„äº‹é¡¹"></a>âš ï¸ æ³¨æ„äº‹é¡¹</h3><h4 id="1-æ€§èƒ½å½±å“"><a href="#1-æ€§èƒ½å½±å“" class="headerlink" title="1. æ€§èƒ½å½±å“"></a>1. æ€§èƒ½å½±å“</h4><ul>
<li>å¤§æµé‡ç¯å¢ƒä¸‹æŠ“åŒ…ä¼šæ¶ˆè€— CPU å’Œå†…å­˜</li>
<li>ä½¿ç”¨é€‚å½“çš„è¿‡æ»¤å™¨å‡å°‘æ•°æ®é‡</li>
<li>ç›‘æ§ç£ç›˜ç©ºé—´ï¼Œé¿å…å†™æ»¡ç³»ç»Ÿç›˜</li>
</ul>
<h4 id="2-å®‰å…¨è€ƒè™‘"><a href="#2-å®‰å…¨è€ƒè™‘" class="headerlink" title="2. å®‰å…¨è€ƒè™‘"></a>2. å®‰å…¨è€ƒè™‘</h4><ul>
<li>æŠ“åŒ…æ–‡ä»¶å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯</li>
<li>åŠæ—¶åˆ é™¤ä¸éœ€è¦çš„æŠ“åŒ…æ–‡ä»¶</li>
<li>åœ¨ç”Ÿäº§ç¯å¢ƒæŠ“åŒ…éœ€è¦é¢å¤–å®¡æ‰¹</li>
</ul>
<h4 id="3-æ³•å¾‹åˆè§„"><a href="#3-æ³•å¾‹åˆè§„" class="headerlink" title="3. æ³•å¾‹åˆè§„"></a>3. æ³•å¾‹åˆè§„</h4><ul>
<li>ç¡®ä¿æœ‰æƒé™æŠ“å–ç½‘ç»œæµé‡</li>
<li>éµå®ˆå…¬å¸ç½‘ç»œç›‘æ§æ”¿ç­–</li>
<li>ä¸è¦æŠ“å–ä»–äººéšç§æ•°æ®</li>
</ul>
<h3 id="ğŸ”§-å¸¸ç”¨è„šæœ¬æ¨¡æ¿"><a href="#ğŸ”§-å¸¸ç”¨è„šæœ¬æ¨¡æ¿" class="headerlink" title="ğŸ”§ å¸¸ç”¨è„šæœ¬æ¨¡æ¿"></a>ğŸ”§ å¸¸ç”¨è„šæœ¬æ¨¡æ¿</h3><h4 id="è‡ªåŠ¨åŒ–æŠ“åŒ…è„šæœ¬"><a href="#è‡ªåŠ¨åŒ–æŠ“åŒ…è„šæœ¬" class="headerlink" title="è‡ªåŠ¨åŒ–æŠ“åŒ…è„šæœ¬"></a>è‡ªåŠ¨åŒ–æŠ“åŒ…è„šæœ¬</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># tcpdump_auto.sh</span></span><br><span class="line"></span><br><span class="line">INTERFACE=<span class="variable">$&#123;1:-any&#125;</span></span><br><span class="line">FILTER=<span class="variable">$&#123;2:-&quot;&quot;&#125;</span></span><br><span class="line">DURATION=<span class="variable">$&#123;3:-60&#125;</span></span><br><span class="line">OUTPUT_DIR=<span class="string">&quot;/tmp/tcpdump&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$OUTPUT_DIR</span></span><br><span class="line">FILENAME=<span class="string">&quot;<span class="variable">$OUTPUT_DIR</span>/capture_<span class="subst">$(hostname)</span>_<span class="subst">$(date +%Y%m%d_%H%M%S)</span>.pcap&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;å¼€å§‹æŠ“åŒ…: <span class="variable">$DURATION</span> ç§’&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ¥å£: <span class="variable">$INTERFACE</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;è¿‡æ»¤å™¨: <span class="variable">$FILTER</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;è¾“å‡ºæ–‡ä»¶: <span class="variable">$FILENAME</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">timeout</span> <span class="variable">$DURATION</span> <span class="built_in">sudo</span> tcpdump -i <span class="variable">$INTERFACE</span> -nn -vv -s 65535 -w <span class="variable">$FILENAME</span> <span class="string">&quot;<span class="variable">$FILTER</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æŠ“åŒ…å®Œæˆï¼Œæ–‡ä»¶å¤§å°: <span class="subst">$(du -h $FILENAME | cut -f1)</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ†æ:&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;tcpdump -r <span class="variable">$FILENAME</span> -nn -vv | less&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;wireshark <span class="variable">$FILENAME</span> &amp;&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="é—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å•"><a href="#é—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å•" class="headerlink" title="é—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å•"></a>é—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># network_check.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;=== ç½‘ç»œé—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å• ===&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;1. åŸºç¡€è¿é€šæ€§æµ‹è¯•&quot;</span></span><br><span class="line">ping -c 4 <span class="variable">$1</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;âœ… Ping æˆåŠŸ&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;âŒ Ping å¤±è´¥&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;2. ç«¯å£è¿é€šæ€§æµ‹è¯•&quot;</span>  </span><br><span class="line">nc -zv <span class="variable">$1</span> <span class="variable">$2</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;âœ… ç«¯å£ <span class="variable">$2</span> å¯è¾¾&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;âŒ ç«¯å£ <span class="variable">$2</span> ä¸å¯è¾¾&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;3. DNS è§£ææµ‹è¯•&quot;</span></span><br><span class="line">nslookup <span class="variable">$1</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;âœ… DNS è§£ææˆåŠŸ&quot;</span> || <span class="built_in">echo</span> <span class="string">&quot;âŒ DNS è§£æå¤±è´¥&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;4. è·¯ç”±è·Ÿè¸ª&quot;</span></span><br><span class="line">traceroute <span class="variable">$1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;5. å¼€å§‹è¯¦ç»†æŠ“åŒ…åˆ†æ...&quot;</span></span><br><span class="line"><span class="comment"># è°ƒç”¨æŠ“åŒ…è„šæœ¬</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“š-æ‰©å±•é˜…è¯»"><a href="#ğŸ“š-æ‰©å±•é˜…è¯»" class="headerlink" title="ğŸ“š æ‰©å±•é˜…è¯»"></a>ğŸ“š æ‰©å±•é˜…è¯»</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.tcpdump.org/manpages/tcpdump.1.html">tcpdump å®˜æ–¹æ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://www.wireshark.org/docs/wsug_html_chunked/">Wireshark ç”¨æˆ·æŒ‡å—</a></li>
<li><a target="_blank" rel="noopener" href="https://tools.ietf.org/rfc/">ç½‘ç»œåè®®æ ˆåˆ†ææ–¹æ³•</a></li>
</ul>
<hr>
<p><strong>æœ€åæ›´æ–°æ—¶é—´ï¼š</strong> $(date +%Y-%m-%d)<br><strong>ç‰ˆæœ¬ï¼š</strong> v1.0<br><strong>ç»´æŠ¤è€…ï¼š</strong> Network Team</p>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/network/" rel="tag"><i class="fa fa-tag"></i> network</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/07/29/SSE-%E4%B8%8E-WebSocket-%E7%A4%BA%E4%BE%8B%E9%A1%B9%E7%9B%AE/" rel="prev" title="SSE ä¸ WebSocket ç¤ºä¾‹é¡¹ç›®">
      <i class="fa fa-chevron-left"></i> SSE ä¸ WebSocket ç¤ºä¾‹é¡¹ç›®
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/07/31/tcpdump%E8%A7%A3%E6%9E%90%E5%8F%8A%E5%88%86%E6%9E%90%E6%8C%87%E5%8D%97/" rel="next" title="tcpdumpè§£æåŠåˆ†ææŒ‡å—">
      tcpdumpè§£æåŠåˆ†ææŒ‡å— <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#tcpdump-%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5%E5%AE%8C%E6%95%B4%E6%8C%87%E5%8D%97"><span class="nav-number">1.</span> <span class="nav-text">tcpdump ç½‘ç»œé—®é¢˜æ’æŸ¥å®Œæ•´æŒ‡å—</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%8E%AF-%E7%9B%AE%E5%BD%95"><span class="nav-number">1.1.</span> <span class="nav-text">ğŸ¯ ç›®å½•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%93%E5%8C%85%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.2.</span> <span class="nav-text">æŠ“åŒ…å‰çš„å‡†å¤‡å·¥ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%97%AE%E9%A2%98%E5%AE%9A%E4%B9%89%E9%98%B6%E6%AE%B5"><span class="nav-number">1.2.1.</span> <span class="nav-text">1. é—®é¢˜å®šä¹‰é˜¶æ®µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">1.2.2.</span> <span class="nav-text">2. ç¯å¢ƒä¿¡æ¯æ”¶é›†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%9D%83%E9%99%90%E5%92%8C%E5%B7%A5%E5%85%B7%E5%87%86%E5%A4%87"><span class="nav-number">1.2.3.</span> <span class="nav-text">3. æƒé™å’Œå·¥å…·å‡†å¤‡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98%E5%9C%BA%E6%99%AF"><span class="nav-number">1.3.</span> <span class="nav-text">å¸¸è§ç½‘ç»œé—®é¢˜åœºæ™¯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%9A%A8-%E5%9C%BA%E6%99%AF%E5%88%86%E7%B1%BB%E8%A1%A8"><span class="nav-number">1.3.1.</span> <span class="nav-text">ğŸš¨ åœºæ™¯åˆ†ç±»è¡¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tcpdump-%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3"><span class="nav-number">1.4.</span> <span class="nav-text">tcpdump å‘½ä»¤å‚æ•°è¯¦è§£</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-number">1.4.1.</span> <span class="nav-text">åŸºç¡€è¯­æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E5%8F%82%E6%95%B0"><span class="nav-number">1.4.2.</span> <span class="nav-text">æ ¸å¿ƒå‚æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.4.3.</span> <span class="nav-text">è¿‡æ»¤è¡¨è¾¾å¼</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%E5%9C%BA%E6%99%AF%E4%B8%8E%E5%91%BD%E4%BB%A4"><span class="nav-number">1.5.</span> <span class="nav-text">å®æˆ˜åœºæ™¯ä¸å‘½ä»¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF1%EF%BC%9ATCP-%E8%BF%9E%E6%8E%A5%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5"><span class="nav-number">1.5.1.</span> <span class="nav-text">åœºæ™¯1ï¼šTCP è¿æ¥é—®é¢˜æ’æŸ¥</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="nav-number">1.5.1.1.</span> <span class="nav-text">é—®é¢˜æè¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E6%80%9D%E8%B7%AF"><span class="nav-number">1.5.1.2.</span> <span class="nav-text">å®šä½æ€è·¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%93%E5%8C%85%E5%91%BD%E4%BB%A4"><span class="nav-number">1.5.1.3.</span> <span class="nav-text">æŠ“åŒ…å‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90"><span class="nav-number">1.5.1.4.</span> <span class="nav-text">ç»“æœåˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF2%EF%BC%9AHTTP-HTTPS-%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5"><span class="nav-number">1.5.2.</span> <span class="nav-text">åœºæ™¯2ï¼šHTTP&#x2F;HTTPS é—®é¢˜æ’æŸ¥</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-1"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">é—®é¢˜æè¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E6%80%9D%E8%B7%AF-1"><span class="nav-number">1.5.2.2.</span> <span class="nav-text">å®šä½æ€è·¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%93%E5%8C%85%E5%91%BD%E4%BB%A4-1"><span class="nav-number">1.5.2.3.</span> <span class="nav-text">æŠ“åŒ…å‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90-1"><span class="nav-number">1.5.2.4.</span> <span class="nav-text">ç»“æœåˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF3%EF%BC%9ADNS-%E8%A7%A3%E6%9E%90%E9%97%AE%E9%A2%98"><span class="nav-number">1.5.3.</span> <span class="nav-text">åœºæ™¯3ï¼šDNS è§£æé—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-2"><span class="nav-number">1.5.3.1.</span> <span class="nav-text">é—®é¢˜æè¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E6%80%9D%E8%B7%AF-2"><span class="nav-number">1.5.3.2.</span> <span class="nav-text">å®šä½æ€è·¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%93%E5%8C%85%E5%91%BD%E4%BB%A4-2"><span class="nav-number">1.5.3.3.</span> <span class="nav-text">æŠ“åŒ…å‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90-2"><span class="nav-number">1.5.3.4.</span> <span class="nav-text">ç»“æœåˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF4%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E5%92%8C%E4%B8%A2%E5%8C%85%E5%88%86%E6%9E%90"><span class="nav-number">1.5.4.</span> <span class="nav-text">åœºæ™¯4ï¼šç½‘ç»œå»¶è¿Ÿå’Œä¸¢åŒ…åˆ†æ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-3"><span class="nav-number">1.5.4.1.</span> <span class="nav-text">é—®é¢˜æè¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E6%80%9D%E8%B7%AF-3"><span class="nav-number">1.5.4.2.</span> <span class="nav-text">å®šä½æ€è·¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%93%E5%8C%85%E5%91%BD%E4%BB%A4-3"><span class="nav-number">1.5.4.3.</span> <span class="nav-text">æŠ“åŒ…å‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90-3"><span class="nav-number">1.5.4.4.</span> <span class="nav-text">ç»“æœåˆ†æ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF5%EF%BC%9A%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98"><span class="nav-number">1.5.5.</span> <span class="nav-text">åœºæ™¯5ï¼šå®¹å™¨ç½‘ç»œé—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-4"><span class="nav-number">1.5.5.1.</span> <span class="nav-text">é—®é¢˜æè¿°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E6%80%9D%E8%B7%AF-4"><span class="nav-number">1.5.5.2.</span> <span class="nav-text">å®šä½æ€è·¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8A%93%E5%8C%85%E5%91%BD%E4%BB%A4-4"><span class="nav-number">1.5.5.3.</span> <span class="nav-text">æŠ“åŒ…å‘½ä»¤</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E6%9E%9C%E5%88%86%E6%9E%90%E6%96%B9%E6%B3%95"><span class="nav-number">1.6.</span> <span class="nav-text">ç»“æœåˆ†ææ–¹æ³•</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%BD%BF%E7%94%A8-Wireshark-%E5%9B%BE%E5%BD%A2%E5%8C%96%E5%88%86%E6%9E%90"><span class="nav-number">1.6.1.</span> <span class="nav-text">1. ä½¿ç”¨ Wireshark å›¾å½¢åŒ–åˆ†æ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%BF%AB%E9%80%9F%E5%88%86%E6%9E%90"><span class="nav-number">1.6.2.</span> <span class="nav-text">2. å‘½ä»¤è¡Œå¿«é€Ÿåˆ†æ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E5%8C%85%E5%88%86%E6%9E%90%E6%B8%85%E5%8D%95"><span class="nav-number">1.6.3.</span> <span class="nav-text">3. æ•°æ®åŒ…åˆ†ææ¸…å•</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#TCP-%E8%BF%9E%E6%8E%A5%E5%88%86%E6%9E%90"><span class="nav-number">1.6.3.1.</span> <span class="nav-text">TCP è¿æ¥åˆ†æ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP-%E5%88%86%E6%9E%90"><span class="nav-number">1.6.3.2.</span> <span class="nav-text">HTTP åˆ†æ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS-%E5%88%86%E6%9E%90"><span class="nav-number">1.6.3.3.</span> <span class="nav-text">DNS åˆ†æ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%8E%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.7.</span> <span class="nav-text">æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9C%85-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-number">1.7.1.</span> <span class="nav-text">âœ… æœ€ä½³å®è·µ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%8A%93%E5%8C%85%E7%AD%96%E7%95%A5"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">1. æŠ“åŒ…ç­–ç•¥</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BC%98%E5%8C%96"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">2. è¿‡æ»¤å™¨ä¼˜åŒ–</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="nav-number">1.7.1.3.</span> <span class="nav-text">3. æ–‡ä»¶ç®¡ç†</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E2%9A%A0%EF%B8%8F-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.7.2.</span> <span class="nav-text">âš ï¸ æ³¨æ„äº‹é¡¹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%80%A7%E8%83%BD%E5%BD%B1%E5%93%8D"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">1. æ€§èƒ½å½±å“</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">2. å®‰å…¨è€ƒè™‘</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%B3%95%E5%BE%8B%E5%90%88%E8%A7%84"><span class="nav-number">1.7.2.3.</span> <span class="nav-text">3. æ³•å¾‹åˆè§„</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%F0%9F%94%A7-%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC%E6%A8%A1%E6%9D%BF"><span class="nav-number">1.7.3.</span> <span class="nav-text">ğŸ”§ å¸¸ç”¨è„šæœ¬æ¨¡æ¿</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E6%8A%93%E5%8C%85%E8%84%9A%E6%9C%AC"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">è‡ªåŠ¨åŒ–æŠ“åŒ…è„šæœ¬</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E8%AF%8A%E6%96%AD%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">é—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å•</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%9A-%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB"><span class="nav-number">1.8.</span> <span class="nav-text">ğŸ“š æ‰©å±•é˜…è¯»</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="shispring"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">shispring</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">172</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2026</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shispring</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
